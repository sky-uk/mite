version: 2.1

orbs:
  python: circleci/python@2.1.1

jobs:
  build:
    docker:
      - image: cimg/python:3.11.2
    steps:
      - checkout
      - python/install-packages:
          pkg-manager: pip
          args: tox
          pypi-cache: true
          venv-cache: false
          pre-install-steps:
            - run: pyenv install 3.9.1
            - run: pyenv install 3.10.10
            - run: pyenv local 3.11.2 3.10.10 3.9.1
      - run:
          name: "Run tox"
          command: tox